plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // https://docs.gradle.org/current/userguide/idea_plugin.html
    id 'idea'
}
apply from: 'zomboid.gradle'

group 'my.mod'
version '1.0'

sourceSets {
    main { java.srcDir('src/main/lua') }
}

repositories {
    jcenter()
    maven { url 'https://jitpack.io' }
}

dependencies {
    implementation 'com.github.yooksi:pz-zdoc:master-SNAPSHOT'
    compile files("lib/zdoc-lua-$game_version" + '.jar')
}

task zdocJar(type: Jar) {
    description('Assembles a jar containing compiled lua classes.')
    archiveFileName = "zdoc-lua-${game_version}.jar"
    destinationDir(file("lib"))

    from "$buildDir/generated/sources/zdoc/"
}

tasks.register('createZDocOutputDir') {
    file('build/generated/sources/zdoc').mkdirs()
}
